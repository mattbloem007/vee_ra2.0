"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[873],{4392:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var c=a(7294),r=a(7543),n=a(8183),l=a(1883),s=a(6437),m=a(7771),o=e=>{let{items:t,removeFromCart:a,loading:r,completed:n,cartId:s,updateCart:o}=e;return r?c.createElement("div",{className:"cart-loading"},c.createElement("div",{className:"cart-loading__spinner"}),c.createElement("p",null,"Loading your cart...")):n?c.createElement("div",{className:"cart-success"},c.createElement("div",{className:"cart-success__icon"},"âœ“"),c.createElement("h2",null,"Success!"),c.createElement("p",null,"Congratulations. Your order and payment has been accepted.")):null===t||0===t.lines.edges.length?c.createElement("div",{className:"cart-empty"},c.createElement("div",{className:"cart-empty__icon"},"ðŸ›’"),c.createElement("h2",null,"Your cart is empty"),c.createElement("p",null,"You will need to add some items to the cart before you can checkout."),c.createElement(l.Link,{to:"/store",className:"btn btn--primary"},"Continue Shopping")):c.createElement("div",{className:"cart-items"},t.lines.edges.map((e=>{const t=e.node.id,r=e.node.merchandise.title,n=e.node.merchandise.product.title,s=e.node.quantity,i=e.node.merchandise.product.images.edges[0].node.url||"";return c.createElement("div",{key:t,className:"cart-item"},c.createElement("div",{className:"cart-item__image"},c.createElement("img",{src:i,alt:n})),c.createElement("div",{className:"cart-item__content"},c.createElement("div",{className:"cart-item__header"},c.createElement("h3",{className:"cart-item__title"},c.createElement(l.Link,{to:"/store/"+n+"/"},n)),c.createElement("button",{className:"cart-item__remove",onClick:()=>a(t),"aria-label":"Remove item"},c.createElement(m.oHP,null))),c.createElement("div",{className:"cart-item__details"},c.createElement("span",{className:"cart-item__variant"},r),c.createElement("span",{className:"cart-item__quantity"},"Quantity: ",s)),c.createElement("div",{className:"cart-item__controls"},c.createElement("label",{className:"cart-item__quantity-label"},"Quantity:",c.createElement("input",{type:"number",value:s,onChange:e=>((e,t)=>{const a=t.target.value;a>=0&&o(e,a)})(t,e),min:"0",className:"cart-item__quantity-input"})))))})))},i=e=>{let{handleCheckout:t,estimatedCost:a}=e;return c.createElement("div",{className:"cart-summary"},c.createElement("div",{className:"cart-summary__content"},c.createElement("div",{className:"cart-summary__total"},c.createElement("span",{className:"cart-summary__label"},"Subtotal:"),c.createElement("span",{className:"cart-summary__amount"},"R",a&&a.subtotalAmount?parseFloat(a.subtotalAmount.amount).toFixed(2):"0.00")),c.createElement("button",{className:"btn btn--primary cart-summary__checkout",onClick:t},"Proceed to Checkout")))},u=a(7896);var d=()=>{const{fetchCartDetails:e,cartData:t,removeFromCart:a,createCheckoutUrl:m,updateCart:d}=(0,s.oR)(),{0:E,1:_}=(0,c.useState)(!0),{0:p,1:h}=(0,c.useState)([]),{0:N,1:v}=(0,c.useState)(!1),{0:b,1:y}=(0,c.useState)({}),g=(0,u.useLocation)();(0,c.useEffect)((()=>{(async()=>{const a=localStorage.getItem("cartId");if(a&&(!t||t.id!==a))try{await e(a)}catch(c){console.error("Error fetching cart:",c)}y(a),_(!1)})()}),[e,t]),(0,c.useEffect)((()=>{"success"===new URLSearchParams(g.search).get("checkout")&&(v(!0),localStorage.setItem("checkoutCompleted","true"),localStorage.removeItem("cartId"),y(null))}),[g.search]);return c.createElement(r.Z,null,c.createElement(n.Z,{title:"Cart - Vee/Ra Decadent Botanical Blends",description:"Your shopping cart"}),c.createElement("div",{className:"cart-page"},c.createElement("div",{className:"container"},c.createElement("nav",{className:"breadcrumb"},c.createElement(l.Link,{to:"/",className:"breadcrumb__link"},"Home"),c.createElement("span",{className:"breadcrumb__separator"},"/"),c.createElement("span",{className:"breadcrumb__current"},"Cart")),c.createElement("header",{className:"cart-header"},c.createElement("h1",{className:"cart-title"},"Your Cart")),c.createElement("div",{className:"cart-content"},c.createElement(o,{completed:N,items:t,loading:E,cartId:b,removeFromCart:e=>a(e),updateCart:d}),!E&&!N&&c.createElement(i,{estimatedCost:(null==t?void 0:t.estimatedCost)||{subtotalAmount:{amount:0}},handleCheckout:async()=>{const e=await m();e&&(window.location.href=e)}})))))}}}]);
//# sourceMappingURL=component---src-pages-cart-js-812e9c96d5cb7229b0ce.js.map